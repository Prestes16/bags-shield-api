<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
  <meta name="theme-color" content="#020617" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Bags Shield ‚Äî v4</title>
  <link rel="stylesheet" href="/app-v4.css" />
  <script defer src="/app-v4.js"></script>
</head>
<body>
  <!-- Splash View -->
  <div class="view view-splash" id="view-splash">
    <button class="hotspot" data-action="nav_home" aria-label="Get Started"></button>
  </div>

  <!-- Home View -->
  <div class="view view-home hidden" id="view-home" data-view="home">
    <div class="header">
      <div class="logo">üõ°Ô∏è Bags Shield</div>
      <div class="wallet-info" id="home-wallet-info">
        <button class="wallet-connect-btn" data-action="open_wallet_modal">Connect Wallet</button>
      </div>
    </div>
    <div class="search-bar">
      <input type="text" id="token-search-input" placeholder="Search token by mint or symbol..." />
      <button data-action="search_token">üîç</button>
    </div>
    <div id="trendOverlay" class="trend-overlay" aria-label="Trending tokens list"></div>
    <div class="action-cards">
      <div class="card" data-action="nav_scan">Scan Transaction</div>
      <div class="card" data-action="nav_simulate">Simulate Swap</div>
      <div class="card" data-action="nav_create_token">Create Token</div>
      <div class="card" data-action="nav_history">History</div>
      <div class="card" data-action="nav_settings">Settings</div>
    </div>
  </div>

  <!-- Scan View -->
  <div class="view view-scan hidden" id="view-scan" data-view="scan">
    <div class="header">
      <button class="back-btn" data-action="nav_home">‚Üê</button>
      <h2>Scan Transaction</h2>
    </div>
    <textarea id="scan-raw-tx" placeholder="Paste raw transaction (base64)..."></textarea>
    <select id="scan-network">
      <option value="mainnet-beta">Mainnet Beta</option>
      <option value="devnet">Devnet</option>
    </select>
    <button data-action="run_scan">Run Scan</button>
    <pre id="scan-result"></pre>
  </div>

  <!-- Simulate View -->
  <div class="view view-simulate hidden" id="view-simulate" data-view="simulate">
    <div class="header">
      <button class="back-btn" data-action="nav_home">‚Üê</button>
      <h2>Simulate Swap</h2>
    </div>
    <input type="text" id="simulate-mint-input" placeholder="Token Mint Address" />
    <div class="toggle-switch">
      <button id="simulate-buy-btn" data-action="set_simulate_mode_buy">Buy</button>
      <button id="simulate-sell-btn" data-action="set_simulate_mode_sell">Sell</button>
    </div>
    <input type="number" id="simulate-amount-input" placeholder="Amount (SOL for Buy, Tokens for Sell)" />
    <input type="number" id="simulate-slippage-input" placeholder="Slippage BPS (e.g., 50 for 0.5%)" value="50" />
    <button data-action="run_simulate">Run Simulation</button>
    <pre id="simulate-result"></pre>
  </div>

  <!-- Settings View -->
  <div class="view view-settings hidden" id="view-settings" data-view="settings">
    <div class="header">
      <button class="back-btn" data-action="nav_home">‚Üê</button>
      <h2>Settings</h2>
    </div>
    <div class="setting-item">
      <span>Language:</span>
      <select id="settings-lang-select">
        <option value="pt-BR">Portugu√™s</option>
        <option value="en">English</option>
      </select>
    </div>
    <div class="setting-item">
      <span>Remember Wallet:</span>
      <input type="checkbox" id="settings-remember-wallet" />
    </div>
    <button data-action="wallet_disconnect">Disconnect Wallet</button>
  </div>

  <!-- Preview Transaction View -->
  <div class="view view-preview-transaction hidden" id="view-preview-transaction" data-view="preview-transaction">
    <div class="header">
      <div class="logo">üõ°Ô∏è Bags Shield</div>
      <div class="user-icon">üë§</div>
    </div>
    <div class="token-header">
      <div class="token-icon" id="preview-token-icon">üí∞</div>
      <div class="token-details">
        <div class="token-name" id="preview-token-name">BAGS</div>
        <div class="token-address" id="preview-token-address">8zCmt....3Xtq</div>
      </div>
    </div>
    <div class="preview-panel">
      <h2 class="panel-title">Preview transaction <span class="score-badge" id="preview-score">A 16</span></h2>
      <div class="detail-row"><span>Amount:</span> <span id="preview-amount">5 SOL</span></div>
      <div class="detail-row"><span>Token price:</span> <span id="preview-token-price">1 SOL = 5,000 BAGS</span></div>
      <div class="detail-row"><span>Slippage:</span> <span id="preview-slippage">0.5%</span></div>
      <div class="detail-row"><span>Estimated received:</span> <span id="preview-estimated">7,475 BAGS (after fees)</span></div>
      <div class="detail-row"><span>Route:</span> <span id="preview-route">Meteora ‚Üí Raydium</span></div>
      <div class="detail-row"><span>Network fee:</span> <span id="preview-network-fee">0.000005 SOL</span></div>
      <div class="detail-row"><span>Liquidity fee:</span> <span id="preview-liquidity-fee">0.25%</span></div>
      <div class="detail-row"><span>Price impact:</span> <span id="preview-price-impact">0.42%</span></div>
    </div>
    <div class="risk-highlights">
      <h3>Risk highlights</h3>
      <div class="risk-badges-container" id="preview-risk-badges">
        <div class="risk-badge ok">Liquidity Locked - OK</div>
        <div class="risk-badge attention">Top Holders 12% - Attention</div>
      </div>
    </div>
    <div class="wallet-status" id="preview-wallet-status">
      <div class="wallet-icon">üíú</div>
      <span>Phantom connected</span>
    </div>
    <div class="action-buttons">
      <button class="confirm-btn" data-action="preview_confirm_transaction">Confirm transaction</button>
      <button class="back-btn" data-action="preview_back_simulate">Back to simulate</button>
    </div>
    <div class="footer-note">Data sources ‚Äî No personal information collected</div>
  </div>

  <!-- History View -->
  <div class="view view-history hidden" id="view-history" data-view="history">
    <div class="header">
      <button class="back-btn" data-action="nav_home">‚Üê</button>
      <h2>History</h2>
    </div>
    <div class="history-list" id="history-list">
      <div class="history-empty">No history yet</div>
    </div>
  </div>

  <!-- Share Center View -->
  <div class="view view-share hidden" id="view-share" data-view="share">
    <div class="header">
      <button class="back-btn" data-action="nav_home">‚Üê</button>
      <h2>Share</h2>
    </div>
    <div class="share-preview" id="share-preview">
      <canvas id="share-canvas" width="800" height="400"></canvas>
    </div>
    <div class="share-actions">
      <button data-action="share_web">Share</button>
      <button data-action="share_download">Download</button>
      <button data-action="share_copy">Copy Text</button>
    </div>
  </div>

  <!-- Create Token Info View -->
  <div class="view view-create-token hidden" id="view-create-token" data-view="create-token">
    <div class="header">
      <button class="back-btn" data-action="nav_home">‚Üê</button>
      <h2>Create Token</h2>
    </div>
    <div class="warning-box">
      <strong>‚ö†Ô∏è Important:</strong> Token creation involves on-chain costs and risks. Do not promise profits. Full transparency required.
    </div>
    <input type="text" id="create-token-name" placeholder="Token Name" />
    <input type="text" id="create-token-symbol" placeholder="Token Symbol (e.g., BAGS)" />
    <textarea id="create-token-description" placeholder="Description"></textarea>
    <input type="url" id="create-token-image-url" placeholder="Image URL" />
    <input type="url" id="create-token-website" placeholder="Website (optional)" />
    <input type="text" id="create-token-twitter" placeholder="Twitter (optional)" />
    <input type="text" id="create-token-telegram" placeholder="Telegram (optional)" />
    <button data-action="create_token_info">Generate Token Info</button>
    <pre id="create-token-result"></pre>
  </div>

  <!-- Create Config View -->
  <div class="view view-create-config hidden" id="view-create-config" data-view="create-config">
    <div class="header">
      <button class="back-btn" data-action="nav_create_token">‚Üê</button>
      <h2>Create Launch Config</h2>
    </div>
    <div class="warning-box">
      <strong>‚ö†Ô∏è Network:</strong> <select id="create-config-network">
        <option value="devnet">Devnet (Test)</option>
        <option value="mainnet-beta">Mainnet (Real)</option>
      </select>
    </div>
    <input type="text" id="create-config-launch-wallet" placeholder="Launch Wallet (default: connected wallet)" />
    <input type="text" id="create-config-tip-wallet" placeholder="Tip Wallet (optional)" />
    <input type="number" id="create-config-tip-lamports" placeholder="Tip Amount (lamports, optional)" />
    <button data-action="create_config">Create Config</button>
    <pre id="create-config-result"></pre>
  </div>

  <!-- Wallet Modal (Overlay) -->
  <div class="overlay hidden" id="wallet-modal">
    <div class="modal-content">
      <h3>Connect Wallet</h3>
      <button data-action="wallet_connect_phantom">Phantom</button>
      <button data-action="wallet_connect_solflare">Solflare</button>
      <button data-action="wallet_connect_mwa">Seed Vault (MWA)</button>
      <button data-action="close_wallet_modal">Cancel</button>
    </div>
  </div>

  <!-- Dev Log Panel -->
  <div class="dev-log" id="devLog">
    <details>
      <summary>Dev Log</summary>
      <div class="log-content" id="logContent"></div>
    </details>
  </div>
</body>
</html>
