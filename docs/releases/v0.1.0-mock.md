# Bags Shield API v0.1.0-mock — Release Notes

**Data:** 2025-11-05  
**Estado:** *mock* (controlado por env)  
**Tag:** \$tag\

## Destaques
- **Endpoints v0 (mock):**
  - \POST /api/scan\ → \{ rawTransaction: base64 }\
  - \POST /api/simulate\ → \{ mint: base58 }\
  - Envelope padrão: \{ success, response|error, meta:{ requestId, mode } }\
- **Dev-server AJV (local):** \
pm run dev-v0\ (porta 8787; suportado \PORT=8888\)
- **Testes automatizados (Newman):** \
pm run test:prod\, \
pm run test:local\, \
pm run test:all\, alias \
pm run smoke\
- **Coleção Postman:** \docs/postman/bags-shield-api-v0.postman_collection.json\
- **Rotas de debug:** \/api/debug/env-bags\, \/api/debug/env-bags-key\, \/api/debug/env-modes\
- **Docs v0:** \docs/api-v0.md\

## Variáveis de Ambiente
- \BAGS_API_BASE\ ✅ (ex.: \https://public-api-v2.bags.fm/api/v1/\)
- \BAGS_API_KEY\ ✅ (presente e **não** exposta)
- \BAGS_SCAN_MODE\ = \mock\
- \BAGS_SIM_MODE\  = \mock\

## Smokes (produção)
`ash
curl -sS -X POST https://bags-shield-api-4.vercel.app/api/scan \
  -H 'Content-Type: application/json' -H 'Accept: application/json' \
  -d '{ "rawTransaction": "AQAAAAAAAAAAAAAA" }'

curl -sS -X POST https://bags-shield-api-4.vercel.app/api/simulate \
  -H 'Content-Type: application/json' -H 'Accept: application/json' \
  -d '{ "mint": "So11111111111111111111111111111111111111112" }'
Limitações Conhecidas
Modo real (BAGS_*_MODE=real) ainda retorna 501 (não implementado).

metadata.base é informativo no mock.

Não expor BAGS_API_KEY em logs/headers.

Próximos Passos
Implementar modo real para scan/simulate (chamadas upstream).

Documentar autenticação/limites e métricas.

Planejar rollout progressivo (Rolling Releases + Skew Protection).
